<html layout:decorate="~{layout}">
<div layout:fragment="content" class="w-full my-3">

    <title>챌린지 리스트</title>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div th:each="challenge : ${challenges}" class="card bg-gray-800 text-white p-4 rounded-lg shadow-lg">

            <div class="card-body rounded-lg" style="background-color: white; color: black; border-radius: 10px;">
                <h2 class="card-title" style="color: red;" th:text="${challenge.name}">챌린지 이름</h2>
                <p style="color: black;" th:text="${challenge.description}">챌린지 설명</p>
                <p style="color: black;"><strong>시작 날짜: </strong><span th:text="${challenge.openDate}">YYYY-MM-DD</span></p>
                <p style="color: black;"><strong>종료 날짜: </strong><span th:text="${challenge.closeDate}">YYYY-MM-DD</span></p>
                <p style="color: black;"><strong>보상: </strong><span th:text="${challenge.requiredPoint}">보상 포인트</span></p>
                <p style="color: black;"><strong>분류: </strong><span th:text="${challenge.type}">챌린지 분류</span></p>
                <p style="color: black;"><strong>내 달성률: </strong>
                    <span th:each="challengeUser : ${challengeUsers}"
                          th:if="${challengeUser.challenge.id == challenge.id}"
                          th:text="${challengeUser.achievementRate}">달성률</span>
                </p>
                <form action="/challenge/participate" method="post">
                    <input type="hidden" name="challengeId" th:value="${challenge.id}">
                    <button type="submit" class="btn btn-error mt-4"
                            th:if="${participatedChallengeIds != null and not #lists.contains(participatedChallengeIds, challenge.id)}"
                            style="color: black;">참여</button>
                    <button type="button" class="btn btn-success mt-4"
                            th:if="${participatedChallengeIds != null and #lists.contains(participatedChallengeIds, challenge.id)}"
                            style="color: black;">참여 중</button>
                </form>
            </div>
        </div>
    </div>

    <a href="/challenge/create">
        <button class="btn btn-error mt-4" style="color: black;">챌린지 추가</button>
    </a>
</div>

</html>
